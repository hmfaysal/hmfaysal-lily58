# -----------------------------------------------
# Lily58 Pro – right-encoder-only, speed build
# -----------------------------------------------

# --- Core radio: max throughput, low latency ---
CONFIG_BT_CTLR_TX_PWR_PLUS_8=y        # 8 dBm → stronger link, fewer retries
CONFIG_BT_CTLR_DATA_LENGTH_MAX=251    # max payload / interval
CONFIG_BT_MAX_CONN=1                  # only the one half needs to connect
CONFIG_BT_MAX_PAIRED=1                # no room-mate pairing waste
CONFIG_ZMK_BLE_EXPLICIT_PAIRING=y     # skip the service cache scan on boot

# --- Encoder (EC11 right side only) ---
CONFIG_EC11=y
CONFIG_EC11_TRIGGER_GLOBAL_THREAD=y
CONFIG_EC11_SCAN_PERIOD_US=500        # 0.5 ms – fastest ZMK allows
CONFIG_EC11_DEBOUNCE_PRESS_US=0       # turn off s/w debounce, rely on RC filter
CONFIG_EC11_DEBOUNCE_RELEASE_US=0

# --- Display (OLED on) but only when needed ---
CONFIG_ZMK_DISPLAY=y
CONFIG_ZMK_DISPLAY_STATUS_SCREEN_CUSTOM=y
CONFIG_ZMK_DISPLAY_WORK_QUEUE_DEDICATED=y  # no contention with main thread
CONFIG_ZMK_DISPLAY_BLANK_ON_IDLE=y         # turn screen off after 5 s
CONFIG_ZMK_WIDGET_WPM_STATUS=n             # saves ~400 B RAM / 1 kB flash
CONFIG_ZMK_WIDGET_BATTERY_STATUS=n         # if you don’t need battery icon
CONFIG_ZMK_WIDGET_OUTPUT_STATUS=n          # if you don’t need output icon

# --- Logging / debug off for release build ---
CONFIG_ZMK_USB_LOGGING=n
CONFIG_ZMK_BLE_LOGGING=n
CONFIG_LOG=n
CONFIG_PRINTK=n
CONFIG_ZMK_DEBUG=n

# --- Free RAM / flash ---
CONFIG_ZMK_IDLE_TIMEOUT=30000         # 30 s → faster deep sleep
CONFIG_ZMK_SLEEP=y
CONFIG_ZMK_BATTERY_REPORT_INTERVAL=3600000  # once an hour
CONFIG_ZMK_RGB_UNDERGLOW=n            # big power + code savings
CONFIG_ZMK_BACKLIGHT=n
CONFIG_ZMK_MOUSE=n
CONFIG_ZMK_SPLASH=n                   # skip boot animation
